import*as t from"@wordpress/interactivity";var e={445:function(t,e,n){function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=new CustomEvent("scProductViewed",{detail:{id:t?.id,name:t?.name,price:e,permalink:t?.permalink,prices:t?.prices,variant_options:t?.variant_options?.data,product_collections:t?.product_collections,quantity:n},bubbles:!0});document.dispatchEvent(o)}n.r(e),n.d(e,{scProductViewed:function(){return o}})}},n={};function o(t){var a=n[t];if(void 0!==a)return a.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};!function(){o.d(a,{O:function(){return m},M:function(){return f}});var e,n,i=(e={getContext:function(){return t.getContext},store:function(){return t.store}},n={},o.d(n,e),n);const{actions:r}=(0,i.store)("surecart/checkout"),{actions:s,state:c}=(0,i.store)("surecart/cart"),{addQueryArgs:u}=wp.url,{speak:l}=wp.a11y,{sprintf:d,__}=wp.i18n,{scProductViewed:p}=o(445),g=t=>"keydown"===t.type&&"Enter"!==t.key&&"Space"!==t.code,{state:v,actions:y}=(0,i.store)("surecart/product-page",{state:{get quantity(){const{selectedPrice:t,quantity:e}=(0,i.getContext)();return t?.ad_hoc?1:e},get selectedAmount(){const t=(0,i.getContext)();if(!t)return!0;const{selectedPrice:e,prices:n}=t;return n?.length>1?e?.amount||"":v.selectedVariant?.amount||e?.amount||""},get selectedDisplayAmount(){const{prices:t,selectedPrice:e}=(0,i.getContext)();return t?.length>1?e?.display_amount||"":v.selectedVariant?.display_amount||e?.display_amount||""},get selectedVariant(){const t=(0,i.getContext)();if(!t)return{};const{variants:e,variantValues:n}=t;return n?m({variants:e,values:n||{}}):{}},get isOnSale(){const t=(0,i.getContext)();if(!t)return!0;const{selectedPrice:e}=t;return e?.is_on_sale||!1},get isOptionUnavailable(){const t=(0,i.getContext)();if(!t)return!0;const{optionNumber:e,option_value:n,product:o,variants:a,variantValues:r}=t;return f(parseInt(e),n,r,a,o)},get isOptionSelected(){const t=(0,i.getContext)();if(!t)return!0;const{optionNumber:e,option_value:n,variantValues:o}=t;return o?.[`option_${e}`]===n},get isOptionValueSelected(){const t=(0,i.getContext)();if(!t)return!0;const{optionValue:e,variantValues:n}=t;return!e||Object.values(n).map((t=>t.toLowerCase())).includes(e.toLowerCase())},get shouldDisplayImage(){const t=(0,i.getContext)();if(!t)return!0;const{variants:e}=t;return!e?.length||v.isOptionValueSelected},get imageDisplay(){return v.shouldDisplayImage?"initial":"none"},get isPriceSelected(){const t=(0,i.getContext)();if(!t)return!0;const{price:e,selectedPrice:n}=t;return n?.id===e?.id},get checkoutUrl(){const{checkoutUrl:t}=(0,i.getContext)();return u(t,{line_items:[v.lineItem],no_cart:!0})},get buttonText(){const t=(0,i.getContext)();if(!t)return!0;const{text:e,outOfStockText:n,unavailableText:o}=t;return v.isSoldOut?n:v.isUnavailable?o:e},get isUnavailable(){const t=(0,i.getContext)();if(!t)return!0;const{product:e,variants:n}=t;return!!e?.archived||!!v?.isSoldOut||!(!n?.length||v.selectedVariant?.id)},get isSoldOut(){const t=(0,i.getContext)();if(!t)return!0;const{product:e}=t;return!e?.has_unlimited_stock&&(v.selectedVariant?.id?v.selectedVariant?.available_stock<=0:e?.available_stock<=0)},get lineItem(){const{adHocAmount:t,selectedPrice:e}=(0,i.getContext)();return{price:e?.id,quantity:Math.max(e?.ad_hoc?1:v.quantity,1),...e?.ad_hoc?{ad_hoc_amount:e?.is_zero_decimal?t:100*t}:{},...v.selectedVariant?.id?{variant:v.selectedVariant?.id}:{}}},get disabled(){const{selectedPrice:t,product:e}=(0,i.getContext)();return t?.archived||e?.archived},get isQuantityDisabled(){const{selectedPrice:t}=(0,i.getContext)();return!!t?.ad_hoc},get isQuantityIncreaseDisabled(){return v.isQuantityDisabled},get isQuantityDecreaseDisabled(){return v.isQuantityDisabled||v.quantity<=1}},actions:{*addToCart(t){const e=Object.values(t.submitter.dataset).includes("context.busy");!e&&s.open();const n=(0,i.getContext)(),{mode:o,formId:a,product:u}=n;try{n.busy=!0;const{addCheckoutLineItem:t}=yield import("@surecart/checkout-service"),i=yield*t(v.lineItem);r.setCheckout(i,o,a),e&&s.open(),c.label=d(/* translators: %s: product name */
__("%s has been added to your cart.","surecart"),u?.name)}catch(t){console.error(t)}finally{n.busy=!1}}},callbacks:{*init(){(window?.dataLayer||window?.gtag)&&(yield import("@surecart/google-events")),window?.fbq&&(yield import("@surecart/facebook-events"));const{selectedPrice:t,product:e}=(0,i.getContext)();p(e,t,v.quantity)},*handleSubmit(t){return t.preventDefault(),t.stopPropagation(),t?.submitter?.value?window.location.assign(t.submitter.value):yield y.addToCart(t)},setOption:t=>{if(g(t))return!0;t.preventDefault();const{variantValues:e,optionNumber:n,option_value:o,option_name:a,option_name_slug:r,option_value_slug:s,urlPrefix:c}=(0,i.getContext)(),l=o||t?.target?.value;e[`option_${n}`]=l,o&&a&&window.history.replaceState({},"",u(window.location.href,{[`${c?c+"-":""}${r}`]:s}))},setPrice:t=>{if(g(t))return!0;t?.preventDefault();const e=(0,i.getContext)(),{price:n,prices:o}=e,a=(o||[]).find((t=>t.id===n?.id));e.selectedPrice=a,e.adHocAmount=null},setAdHocAmount:t=>{(0,i.getContext)().adHocAmount=parseFloat(t.target.value)},onQuantityChange:t=>{const e=(0,i.getContext)();e.quantity=Math.max(parseInt(t.target.value),1),l(`Quantity set to ${e.quantity}`,"polite")},onQuantityDecrease:t=>{if(g(t))return!0;t?.preventDefault();const e=(0,i.getContext)();v.isQuantityDisabled||(e.quantity=Math.max(1,v.quantity-1),l(`Quantity set to ${e.quantity}`,"polite"))},onQuantityIncrease:t=>{if(g(t))return!0;t?.preventDefault();const e=(0,i.getContext)();e.quantity=v.quantity+1,l(`Quantity set to ${e.quantity}`,"polite")}}}),m=t=>{let{variants:e,values:n}=t;const o=Object.keys(n||{});for(const t of e){const e=["option_1","option_2","option_3"].map((e=>t[e])).filter((t=>null!=t));if(e?.length===o?.length&&o.every((t=>e.includes(n[t]))))return t}return null},f=function(t,e,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0;if(a?.has_unlimited_stock)return!1;if(1===t){const t=(o||[]).filter?.((t=>t.option_1===e));return Math.max(...t.map((t=>t.available_stock)))<=0}if(2===t){const t=(o||[]).filter((t=>t?.option_1===n.option_1&&t.option_2===e));return Math.max(...t.map((t=>t.available_stock)))<=0}const i=(o||[]).filter((t=>t?.option_1===n.option_1&&t?.option_2===n.option_2&&t.option_3===e));return Math.max(...i.map((t=>t.available_stock)))<=0}}();var i=a.O,r=a.M;export{i as getVariantFromValues,r as isProductVariantOptionSoldOut};